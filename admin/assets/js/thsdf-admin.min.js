function holidaysAddClassRow(elm){ptdelivery_settings.addNewClassRow(elm)}function holidaysRemoveClassRow(elm){ptdelivery_settings.removeClassRow(elm)}function initialise_date_picker(start_date_value,end_date_value){jQuery("#ptdt_datepicker_start").datepicker({dateFormat:"yy-mm-dd",showButtonPanel:!0,changeMonth:!0,changeYear:!0,inline:!0,minDate:0,onSelect:function(start_date,inst){jQuery("#ptdt_datepicker_end").prop("disabled",!1),this.classList.remove("error"),jQuery("#ptdt_datepicker_end").val(""),jQuery(".general-set-date_holiday").prop("disabled",!0),jQuery(".thsdf-action-cell.action-cell a").addClass("unselectable"),initialise_end_datepicker(start_date)}})}function initialise_end_datepicker(start_date){jQuery("#ptdt_datepicker_end").datepicker("destroy"),jQuery("#ptdt_datepicker_end").datepicker({dateFormat:"yy-mm-dd",showButtonPanel:!0,changeMonth:!0,changeYear:!0,inline:!0,minDate:new Date(start_date),onSelect:function(end_date,inst){jQuery(".general-set-date_holiday").prop("disabled",!1),this.classList.remove("error"),jQuery(".thsdf-action-cell.action-cell a").removeClass("unselectable"),jQuery(".general-set-date_holiday").val(""),initialise_holiday_datepicker(start_date,end_date)}})}function initialise_holiday_datepicker(start_date,end_date){function DisableHolidays(date){var holidays=get_already_set_holiday(jQuery(this)),y=date.getFullYear(),m=("0"+(date.getMonth()+1)).slice(-2),d=("0"+date.getDate()).slice(-2);return dmy=y+"-"+m+"-"+d,-1==jQuery.inArray(dmy,holidays)?[!0,""]:[!1,"","Unavailable"]}jQuery(".general-set-date_holiday").datepicker("destroy"),jQuery(".general-set-date_holiday").datepicker({dateFormat:"yy-mm-dd",showButtonPanel:!0,changeMonth:!0,changeYear:!0,inline:!0,minDate:new Date(start_date),maxDate:new Date(end_date),onSelect:function(date_selected,inst){jQuery(".general-settings-row .general-set-date_holiday").each(function(){holidays_data.push(this.value)})},beforeShowDay:DisableHolidays})}function ptdt_holiday_datepicker(){var start_date_value=jQuery("#ptdt_datepicker_start").val(),end_date_value=jQuery("#ptdt_datepicker_end").val();null!=start_date_value&&initialise_end_datepicker(start_date_value),null!=end_date_value&&initialise_holiday_datepicker(start_date_value,end_date_value)}function get_already_set_holiday(elm){var holiday_date=[];return jQuery(".general-set-date_holiday").not(elm).each(function(){var value=jQuery(this).val();holiday_date.push(value)}),holiday_date}function thwsdfwidgetPopUp(){var x=document.getElementById("myDIV"),th_animation=(document.getElementById("myWidget"),document.getElementById("th_quick_border_animation")),th_arrow=document.getElementById("th_arrow_head");"none"!==x.style.display&&x.style.display?(x.style.display="none",th_arrow.style="transform:rotate(45deg);",th_animation.style.animation="pulse 1.5s infinite"):(x.style.display="block",th_arrow.style="transform:rotate(-12.5deg);",th_animation.style="box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);",th_animation.style.animation="none")}function thwsdfwidgetClose(){var z=document.getElementById("myDIV"),th_animation=(document.getElementById("myWidget"),document.getElementById("th_quick_border_animation")),th_arrow=document.getElementById("th_arrow_head");z.style.display="none",th_arrow.style="transform:rotate(45deg);",th_animation.style.animation="pulse 1.5s infinite"}jQuery(function($){function save_calender_general_settings(){var settings_info={},plan_display_data=[];$(document).on("click",".save_calender_settings",function(e){function onlyUnique(value,index,self){return self.indexOf(value)===index}var holidays_data=[];e.preventDefault(),$(".thsdf_updated_mssg").html(""),$(".thpt-form-table .spinner").show();var product_id=$("input[name=g_product_id]").val(),week_start=$('select[name="g_week_start"]').val(),delivery_day=[],delivery_day_f=[];$("input[name='g_delivery_day[]']:checked").each(function(){delivery_day_f.push(this.value)});var delivery_day=delivery_day_f.filter(onlyUnique),start_date=$("input[name=g_start_date]").val(),end_date=$("input[name=g_end_date]").val();$(".thpt-general-settings-row .g-holidays").each(function(){holidays_data.push(this.value),""==this.value&&$(this).closest("tr").not(":nth-child(1)").remove()});var holidays=holidays_data.filter(onlyUnique);$("input[name='g_plan_display[]']:checked").each(function(){plan_display_data.push(this.value)});var plan_display=plan_display_data.filter(onlyUnique);if(""!=product_id&&(settings_info.product_id=product_id,settings_info.week_start=week_start,settings_info.delivery_day=delivery_day,settings_info.start_date=start_date,settings_info.end_date=end_date,settings_info.holidays=holidays,settings_info.plan_display=plan_display),0!=delivery_day.length&&""!=end_date){var general_nonce=thsdf_ajax_script.general_settings_nonce;$(".ptdt-setting-loader").show(),$.ajax({url:ajaxurl,type:"post",data:{action:"save_calender_settings",product_id:product_id,settings_data:settings_info,nonce:general_nonce},success:function(response){$(".thsdf_updated_mssg").html(response),$(".ptdt-setting-loader").hide()}})}})}function default_general_settings(){$(document).on("click",".default-single-general-settings",function(e){if(e.preventDefault(),!confirm("Are you sure you want to reset to default settings? all your changes will be deleted."))return!1;var d=new Date,month=d.getMonth()+1,day=d.getDate(),settings_info=(d.getFullYear(),{}),delivery_day=[],holidays=[],plan_display=[],product_id=$("input[name=g_product_id]").val();$('select[name="g_week_start"]').val("sunday"),$("input[name='g_delivery_day[]']:checked").each(function(){$(this).attr("checked",!1)}),$("input[name=g_start_date]").val(""),$("input[name=g_end_date]").val(""),$(".thpt-general-settings-row .g-holidays").val(""),$("input[name='g_plan_display[]']:checked").each(function(){$(this).attr("checked",!1)}),$(".holidays-list.thptadmin-dynamic-row-table").find("tr:gt(0)").remove(),""!=product_id&&(settings_info.product_id=product_id,settings_info.week_start="sunday",settings_info.delivery_day=delivery_day,settings_info.start_date="",settings_info.end_date="",settings_info.holidays=holidays,settings_info.plan_display=plan_display);var general_nonce=thsdf_ajax_script.general_settings_nonce;$(".ptdt-setting-loader").show(),$.ajax({url:ajaxurl,type:"post",data:{action:"default_general_settings",product_id:product_id,settings_data:settings_info,nonce:general_nonce},success:function(response){$(".thsdf_updated_mssg").html(response),$(".ptdt-setting-loader").hide()}})})}function save_calender_display_settings(){var settings_info={};$(document).on("click",".ptdt-single-display-settings-save",function(e){e.preventDefault(),$(".thsdf_display_updated_mssg").html(""),$(".thpt-form-table .spinner").show();var product_id_display=$("input[name=g_product_id]").val(),calendar_border=$('input[name="g_calendar_border"]').val(),day_bg=$('input[name="g_day_bg"]').val(),nav_arrow=$('input[name="g_nav_arrow"]').val(),tooltip_bg=$('input[name="g_tooltip_bg"]').val(),date_color=$('input[name="g_date_color"]').val(),day_title_color=$('input[name="g_day_title_color"]').val(),day_color=$('input[name="g_day_color"]').val(),holiday_color=$('input[name="g_holiday_color"]').val(),tooltip_text=$('input[name="g_tooltip_text"]').val(),input_text=$('input[name="g_input_text"]').val();""!=product_id_display&&(settings_info.product_id=product_id_display,settings_info.calendar_border=calendar_border,settings_info.day_bg=day_bg,settings_info.nav_arrow=nav_arrow,settings_info.tooltip_bg=tooltip_bg,settings_info.date_color=date_color,settings_info.day_title_color=day_title_color,settings_info.day_color=day_color,settings_info.holiday_color=holiday_color,settings_info.tooltip_text=tooltip_text,settings_info.input_text=input_text),$(".ptdt-setting-loader").show();var display_nonce=thsdf_ajax_script.display_settings_nonce;$.ajax({url:ajaxurl,type:"post",data:{action:"save_caldr_display_setting",product_id:product_id_display,settings_data:settings_info,nonce:display_nonce},success:function(response){$(".ptdt-setting-loader").hide(),$(".thsdf_display_updated_mssg").html(response)}})})}function default_display_settings(){var settings_info={},calendar_border=$('input[name="g_calendar_border"]'),day_bg=$('input[name="g_day_bg"]'),nav_arrow=$('input[name="g_nav_arrow"]'),tooltip_bg=$('input[name="g_tooltip_bg"]'),date_color_field=$('input[name="g_date_color"]'),day_title_color_field=$('input[name="g_day_title_color"]'),day_color_field=$('input[name="g_day_color"]'),holiday_color_field=$('input[name="g_holiday_color"]'),tooltip_text_field=$('input[name="g_tooltip_text"]'),input_text_field=$('input[name="g_input_text"]');$(document).on("click",".default-single-display-settings",function(e){if(e.preventDefault(),confirm("Are you sure you want to reset to default settings? all your changes will be deleted.")){var product_id_display=$("input[name=g_product_id]").val();calendar_border.val("#bdb7b7"),calendar_border.parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:"#bdb7b7"}),day_bg.val("#e3f0f8"),day_bg.parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:"#e3f0f8"}),nav_arrow.val("#a91549"),nav_arrow.parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:"#a91549"}),tooltip_bg.val("#ffffff"),tooltip_bg.parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:"#ffffff"}),date_color_field.val("#a91549"),date_color_field.parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:"#a91549"}),day_title_color_field.val("#6d6d6d"),day_title_color_field.parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:"#6d6d6d"}),day_color_field.val("#3f415c"),day_color_field.parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:"#3f415c"}),holiday_color_field.val("#a91549"),holiday_color_field.parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:"#a91549"}),tooltip_text_field.val("#444444"),tooltip_text_field.parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:"#444444"}),input_text_field.val("#4a78bc"),input_text_field.parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:"#4a78bc"}),""!=product_id_display&&(settings_info.product_id=product_id_display,settings_info.calendar_border="#bdb7b7",settings_info.day_bg="#e3f0f8",settings_info.nav_arrow="#a91549",settings_info.tooltip_bg="#ffffff",settings_info.date_color="#a91549",settings_info.day_title_color="#6d6d6d",settings_info.day_color="#3f415c",settings_info.holiday_color="#a91549",settings_info.tooltip_text="#444444",settings_info.input_text="#4a78bc"),$(".ptdt-setting-loader").show();var display_nonce=thsdf_ajax_script.display_settings_nonce;$.ajax({url:ajaxurl,type:"post",data:{action:"default_display_settings",product_id:product_id_display,settings_data:settings_info,nonce:display_nonce},success:function(response){$(".ptdt-setting-loader").hide(),$(".thsdf_display_updated_mssg").html(response)}})}})}function order_item_cancelled_date_specific(){var request_running=!1;$(document).on("click",".ptdt_delivery_cancelled",function(event){if(event.preventDefault(),!request_running){var item_date=$(this).data("itemdate"),item_id=$(this).data("itemid"),itemqty=$(this).data("itemqty"),item_price=$(this).data("price");$(".date_specific_cancel_"+item_id).hide(),$(".date_specific_refund_"+item_id).show(),order_item_refund_date_specific(item_id,item_date),order_item_refund_cancel_date_specific(item_id,item_date),$(".ptdt-setting-loader_"+item_date+"_"+item_id).show();var aj_nonce=thsdf_ajax_script.order_status_canceled_nonce;$.ajax({url:ajaxurl,type:"post",data:{action:"order_status_deleted",item_id:item_id,item_date:item_date,itemqty:itemqty,item_price:item_price,nonce:aj_nonce},success:function(response){$(".plan_delivery_dls_tr_"+item_date+"_"+item_id).hide(),$(".ptdt-setting-loader_"+item_date+"_"+item_id).hide(),$(".ptdt_cancelled_order_empty_note_"+item_id).hide(),$(".ptdt_delivery_status_"+item_date+"_"+item_id).html("Pending").addClass("status_orange"),$(".delivery_cancelled_"+item_date+"_"+item_id).html("-").addClass("not-active"),$(".delivery_completed_"+item_date+"_"+item_id).html("-").addClass("not-active"),$(".ptdt_cancelled_items_"+item_id).show(),$(".date_specific_cancel_"+item_id).hide(),$(".ptdt_cancelled_items_"+item_id+" table tbody").append(response)},complete:function(){request_running=!1}}),request_running=!0}})}function order_item_completed_date_specific(){$(document).on("click",".ptdt_delivery_completed",function(event){event.preventDefault();var item_date=$(this).data("itemdate"),item_id=$(this).data("itemid");$(".ptdt-setting-loader_"+item_date+"_"+item_id).show();var aj_nonce=thsdf_ajax_script.order_status_completed_nonce;$.ajax({url:ajaxurl,type:"post",data:{action:"order_status_completed",item_id:item_id,item_date:item_date,nonce:aj_nonce},success:function(response){$(".ptdt-setting-loader_"+item_date+"_"+item_id).hide(),$(".ptdt_delivery_status_"+item_date+"_"+item_id).html("Completed").addClass("status_green"),$(".delivery_completed_"+item_date+"_"+item_id).html("-").addClass("not-active"),$(".delivery_cancelled_"+item_date+"_"+item_id).html("-").addClass("not-active")}})})}function order_item_refund_date_specific(itemid,itemdate){$(document).on("click",".button.date_specific_refund",function(event){event.preventDefault();var item_total=0,item_date="",item_qty="",item_id="";item_date_arr=[],item_id=""==itemid?$(this).parent().find("table.delivery_cancelled_item_table .sd_order_item_id").val():itemid,$(this).parent().find("table.delivery_cancelled_item_table th input.order_checkbox_display.cb-select-"+item_id).each(function(){$(this).is(":checked")&&(item_total+=parseInt($(this).data("qty")),item_qty=$(this).data("qty"),item_date=$(this).data("date"),item_date_arr.push($(this).data("date")))});var aj_nonce=thsdf_ajax_script.order_date_specific_refund_nonce;$.ajax({url:ajaxurl,type:"post",data:{action:"order_date_specific_refund",item_id:item_id,item_date:item_date_arr,nonce:aj_nonce},success:function(response){$("html, body").animate({scrollTop:$(".do-manual-refund").offset().top-100},500)}}),$(".date_specific_cancel_"+item_id).show(),$(".date_specific_refund_"+item_id).hide(),$(".refund-items").trigger("click");var refund_order_item_qty=$("tr.item").find('input[name="refund_order_item_qty['+item_id+']"]');$(refund_order_item_qty).val(item_total),refund_quantity_change(item_id)})}function order_item_refund_cancel_date_specific(itemid,item_date){$(document).on("click",".button.date_specific_cancel",function(event){event.preventDefault();var item_id="";item_date_arr=[],item_id=""==itemid?$(this).parent().find("table.delivery_cancelled_item_table .sd_order_item_id").val():itemid,$(".cancel-action").trigger("click");$("tr.item").find('input[name="refund_order_item_qty['+item_id+']"]');$(".date_specific_cancel_"+item_id).hide(),$(".date_specific_refund_"+item_id).show()})}function refund_quantity_change(item_id){var refund_qunatity=$('input[name="refund_order_item_qty['+item_id+']"]'),$row=refund_qunatity.closest("tr.item"),qty=$row.find("input.quantity").val(),refund_qty=refund_qunatity.val(),line_total=$('input[name="line_total['+item_id+']"]',$row),refund_line_total=$('input[name="refund_line_total['+item_id+']"]',$row),mon_decimal_point=thwsd_ajax_script.mon_decimal_point,unit_total=accounting.unformat(line_total.attr("data-total"),mon_decimal_point)/qty;refund_line_total.val(parseFloat(accounting.formatNumber(unit_total*refund_qty,woocommerce_admin_meta_boxes.rounding_precision,"")).toString().replace(".",mon_decimal_point)).change(),$(".refund_line_tax",$row).each(function(){var $refund_line_total_tax=$('input[name="refund_line_tax['+item_id+'][1]"]',$row),tax_id=$refund_line_total_tax.data("tax_id"),line_total_tax=$('input.line_tax[data-tax_id="'+tax_id+'"]',$row),unit_total_tax=accounting.unformat(line_total_tax.data("total_tax"),mon_decimal_point)/qty;0<unit_total_tax?$refund_line_total_tax.val(parseFloat(accounting.formatNumber(unit_total_tax*refund_qty,woocommerce_admin_meta_boxes.rounding_precision,"")).toString().replace(".",mon_decimal_point)).change():$refund_line_total_tax.val(0).change()}),refund_qty>0?$("#restock_refunded_items").closest("tr").show():($("#restock_refunded_items").closest("tr").hide(),$(".woocommerce_order_items input.refund_order_item_qty").each(function(){refund_qunatity.val()>0&&$("#restock_refunded_items").closest("tr").show()}))}function order_edit_checkbox(){$(".ptdt-select-all").click(function(){$("input.order_checkbox_display:checkbox").not(this).prop("checked",this.checked)}),$("input.order_checkbox_display").click(function(){var item_id=$(this).val();$(".date_specific_cancel_"+item_id).hide(),$(".date_specific_refund_"+item_id).show();var chk_box_status="";$("input.order_checkbox_display").each(function(){chk_box_status=!!$(this).attr("checked")})})}function ordered_item_delete_from_cancelled_table(){var request_running=!1;$(document).on("click",".ptdt-dlt-fm-cancelled",function(event){if(!request_running){item_id=$(this).data("item_id"),item_date=$(this).data("item_date"),item_price=$(this).data("item_price"),item_qty=$(this).data("item_qty"),$(".date_specific_cancel_"+item_id).hide(),$(".date_specific_refund_"+item_id).show();var aj_nonce=thsdf_ajax_script.delete_from_cancelled_table_nonce;$.ajax({url:ajaxurl,type:"post",data:{action:"ordered_item_delete_from_cancelled_table",item_id:item_id,item_date:item_date,item_price:item_price,item_qty:item_qty,nonce:aj_nonce},success:function(response){$(".delivery_cancelled_tr_"+item_date+"_"+item_id).remove(),$(".delivery_cancelled_tr_"+item_date+"_"+item_id+" .order_checkbox_display").prop("checked",!1),$("table.plan_delivery_dls_table_"+item_id+" tbody").append(response),$("ptdt_cancelled_items_"+item_id).css("display","none"),$(".delivery_cancelled_row").hasClass("delivery_cancelled_row_"+item_id)?$(".ptdt_cancelled_items_"+item_id).show():$(".ptdt_cancelled_items_"+item_id).hide()},complete:function(){request_running=!1}}),request_running=!0}})}window.onload=function(){window.navigator.userLanguage||window.navigator.language},$(document).ready(function($){$(".plan_delivery_cancelled_items_view").hide(),$(".button.date_specific_cancel").hide(),document.addEventListener("DOMContentLoaded",function(event){var $load=document.getElementById("load");setTimeout(function(){$load.className+=" loader-removed"},500)}),$("input.have_ptdt_calendar").each(function(){var ptdt_calendar_item_id=$(this).val();""!=ptdt_calendar_item_id&&($('input[name="refund_order_item_qty['+ptdt_calendar_item_id+']"]').prop("disabled",!0),$('input[name="refund_line_total['+ptdt_calendar_item_id+']"]').prop("disabled",!0))}),save_calender_general_settings(),default_general_settings(),save_calender_display_settings(),default_display_settings(),order_edit_checkbox(),order_item_cancelled_date_specific(),order_item_completed_date_specific();order_item_refund_date_specific("",""),order_item_refund_cancel_date_specific("",""),ordered_item_delete_from_cancelled_table()}),$(".ptdt-display-admin-colorpick").change(function(){var calendar_border=$('input[name="g_calendar_border"]').val(),calendar_border_Ok=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(calendar_border),day_bg=$('input[name="g_day_bg"]').val(),day_bg_Ok=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(day_bg),nav_arrow=$('input[name="g_nav_arrow"]').val(),nav_arrow_Ok=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(nav_arrow),tooltip_bg=$('input[name="g_tooltip_bg"]').val(),tooltip_bg_Ok=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(tooltip_bg),date_color=$('input[name="g_date_color"]').val(),date_color_Ok=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(date_color),day_title_color=$('input[name="g_day_title_color"]').val(),day_title_color_Ok=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(day_title_color),day_color=$('input[name="g_day_color"]').val(),day_color_Ok=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(day_color),holiday_color=$('input[name="g_holiday_color"]').val(),holiday_color_Ok=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(holiday_color),tooltip_text=$('input[name="g_tooltip_text"]').val(),tooltip_text_Ok=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(tooltip_text),input_text=$('input[name="g_input_text"]').val(),input_text_Ok=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(input_text);0==calendar_border_Ok&&$('input[name="g_calendar_border"]').val("#bdb7b7"),0==day_bg_Ok&&$('input[name="g_day_bg"]').val("#e3f0f8"),0==nav_arrow_Ok&&$('input[name="g_nav_arrow"]').val("#a91549"),0==tooltip_bg_Ok&&$('input[name="g_tooltip_bg"]').val("#ffffff"),0==date_color_Ok&&$('input[name="g_date_color"]').val("#a91549"),0==day_title_color_Ok&&$('input[name="g_day_title_color"]').val("#6d6d6d"),0==day_color_Ok&&$('input[name="g_day_color"]').val("#3f415c"),0==holiday_color_Ok&&$('input[name="g_holiday_color"]').val("#a91549"),0==tooltip_text_Ok&&$('input[name="g_tooltip_text"]').val("#444444"),0==input_text_Ok&&$('input[name="g_input_text"]').val("#4a78bc")})}(window.jQuery,window,document)),jQuery(function($){$(document).ready(function(){var plan_delivery_tab=$("#woocommerce-product-data .plan_delivery_options.plan_delivery_tab"),plan_delivery_checkbox=$("#woocommerce-product-data .type_box input[type='checkbox']#_plan_delivery_set"),general_setting=$(".woocommerce_options_panel .options_group input.ptdelivery-global-settings[type='checkbox']");plan_delivery_checkbox.is(":checked")?(plan_delivery_tab.show(),plan_delivery_tab.addClass("show_if_simple"),plan_delivery_tab.addClass("show_if_variable")):(plan_delivery_tab.hide(),plan_delivery_tab.removeClass("show_if_simple"),plan_delivery_tab.removeClass("show_if_variable")),general_setting.is(":checked")?$(".thptdelivery-accordion-ul > li").addClass("th-accordion-disabled"):$(".thptdelivery-accordion-ul > li").removeClass("th-accordion-disabled"),plan_delivery_checkbox.change(function(){this.checked?(plan_delivery_tab.show(),plan_delivery_tab.addClass("show_if_simple"),plan_delivery_tab.addClass("show_if_variable")):($("#plan_delivery_product_data").hide(),plan_delivery_tab.hide(),plan_delivery_tab.removeClass("show_if_simple"),plan_delivery_tab.removeClass("show_if_variable"),$("#woocommerce-product-data .plan_delivery_options.plan_delivery_tab").removeClass("active"),$("#woocommerce-product-data .general_options.general_tab").addClass("active"),$("#woocommerce-product-data #general_product_data").show())}),$(".thptdelivery-accordion .thptdelivery-toggle").click(function(e){e.preventDefault();var $this=$(this);$this.next().hasClass("show")?($this.next().removeClass("show"),$this.next().slideUp(350)):($this.parent().parent().find(".thptdelivery-accordion li .thptdelivery-inner").removeClass("show"),$this.parent().parent().find(".thptdelivery-accordion li .thptdelivery-inner").slideUp(350),$this.next().toggleClass("show"),$this.next().slideToggle(350))}),$(".woocommerce_options_panel .options_group input.ptdelivery-global-settings[type='checkbox']").is(":checked")?($(".thptdelivery-accordion-ul > li").addClass("th-accordion-disabled"),$(".woocommerce_options_panel ._global_settings_field label").removeClass("th-global-settings-disabled"),$(".woocommerce_options_panel ._global_settings_field input.ptdelivery-global-settings").removeClass("th-global-checkbox-disabled")):($(".thptdelivery-accordion-ul > li").removeClass("th-accordion-disabled"),$(".woocommerce_options_panel ._global_settings_field label").addClass("th-global-settings-disabled"),$(".woocommerce_options_panel ._global_settings_field input.ptdelivery-global-settings").addClass("th-global-checkbox-disabled")),$(".ptdelivery-global-settings").click(function(){$(".woocommerce_options_panel .options_group input.ptdelivery-global-settings[type='checkbox']").is(":checked")?($(".thptdelivery-accordion-ul > li").addClass("th-accordion-disabled"),$(".woocommerce_options_panel ._global_settings_field label").removeClass("th-global-settings-disabled"),$(".woocommerce_options_panel ._global_settings_field input.ptdelivery-global-settings").removeClass("th-global-checkbox-disabled"),$(".thptdelivery-accordion .thptdelivery-toggle").parent().parent().find(".thptdelivery-accordion li .thptdelivery-inner").removeClass("show"),$(".thptdelivery-accordion .thptdelivery-toggle").parent().parent().find(".thptdelivery-accordion li .thptdelivery-inner").slideUp(350),$(".thptdelivery-accordion .thptdelivery-toggle").next().slideUp(350)):($(".thptdelivery-accordion-ul > li").removeClass("th-accordion-disabled"),$(".woocommerce_options_panel ._global_settings_field label").addClass("th-global-settings-disabled"),$(".woocommerce_options_panel ._global_settings_field input.ptdelivery-global-settings").addClass("th-global-checkbox-disabled"))})})}(window.jQuery,window,document));var ptdelivery_settings=function($,window,document){function addNewClassRow(elm){var ptable=$(elm).closest("table");ptable.find("tbody tr").size()>0?ptable.find("tbody tr:last").after(CLASS_ROW_HTML):ptable.find("tbody").append(CLASS_ROW_HTML),ptdt_holiday_datepicker()}function removeClassRow(elm){var ptable=$(elm).closest("table");$(elm).closest("tr").remove(),0==ptable.find("tbody tr").size()&&ptable.find("tbody").append(CLASS_ROW_HTML),ptdt_holiday_datepicker()}var CLASS_ROW_HTML="<tr>";return CLASS_ROW_HTML+='<td style="width:260px;"><input type="text" name="g_holidays[]" placeholder="yyyy-mm-dd" value="" class="general-set-date_holiday g-holidays" style="width:250px;" autocomplete="off" readonly /></td>',CLASS_ROW_HTML+='<td class="action-cell"><a href="javascript:void(0)" onclick="holidaysAddClassRow(this)" class="btn btn-green" title="Add new class"><span class="dashicons dashicons-plus"></span></a></td>',CLASS_ROW_HTML+='<td class="action-cell"><a href="javascript:void(0)" onclick="holidaysRemoveClassRow(this)" class="btn btn-red" title="Remove class"><span class="dashicons dashicons-no-alt"></span></a></td>',CLASS_ROW_HTML+='<td class="break"></td>',CLASS_ROW_HTML+="</tr>",{addNewClassRow:addNewClassRow,removeClassRow:removeClassRow}}(window.jQuery,window,document),holidays_data=[];!function($){jQuery(document).ready(function(){var start_date_value="",end_date_value="",start_date_value=jQuery("#ptdt_datepicker_start").val(),end_date_value=jQuery("#ptdt_datepicker_end").val();""==start_date_value?initialise_date_picker(start_date_value,end_date_value):null!=start_date_value&&""==end_date_value?(jQuery(".general-set-date_holiday").prop("disabled",!0),jQuery(".thsdf-action-cell.action-cell a").addClass("unselectable"),initialise_date_picker(start_date_value,end_date_value),initialise_end_datepicker(start_date_value)):null!=start_date_value&&""!=end_date_value&&(initialise_date_picker(start_date_value,end_date_value),initialise_end_datepicker(start_date_value),initialise_holiday_datepicker(start_date_value,end_date_value)),jQuery("#ptdt_datepicker_start").blur(function(){""==jQuery("#ptdt_datepicker_start").val()&&(jQuery("#ptdt_datepicker_end").prop("disabled",!0),jQuery(".general-set-date_holiday").prop("disabled",!0),jQuery(".thsdf-action-cell.action-cell a").addClass("unselectable"),this.classList.add("error"))}),jQuery("#ptdt_datepicker_end").blur(function(){""==jQuery("#ptdt_datepicker_end").val()&&(jQuery(".general-set-date_holiday").prop("disabled",!0),jQuery(".thsdf-action-cell.action-cell a").addClass("unselectable"),this.classList.add("error"))}),$(".thsdf-schedule-setting-table .button-primary-thsdf-save-settings").on("click",function(e){var week_days=[],datepicker_end_val=jQuery("#ptdt_datepicker_end").val(),datepicker_start_val=jQuery("#ptdt_datepicker_start").val();jQuery("input[name='g_delivery_day[]']:checked").each(function(){week_days.push(this.value)}),""==datepicker_end_val?(jQuery(".thsdf-required-mssg").css("display","block"),e.preventDefault()):jQuery(".thsdf-required-mssg").css("display","none"),0===week_days.length?(jQuery(".thsdf-weekday-required-mssg").css("display","block"),e.preventDefault()):jQuery(".thsdf-weekday-required-mssg").css("display","none"),""==datepicker_start_val?(jQuery(".thsdf-startdate-required-mssg").css("display","block"),e.preventDefault()):jQuery(".thsdf-startdate-required-mssg").css("display","none")}),jQuery("#ptdt_datepicker_end").change(function(){""==jQuery("#ptdt_datepicker_end").val()?jQuery(".thsdf-required-mssg").css("display","block"):jQuery(".thsdf-required-mssg").css("display","none")}),jQuery(".plan_delivery_wrapper .plan_delivery_toggle").click(function(e){e.preventDefault();var $this=jQuery(this);$this.next().hasClass("show")?($this.next().removeClass("show"),$this.next().slideUp(350)):($this.parent().parent().find(".plan_delivery_wrapper .plan_delivery_details").removeClass("show"),$this.parent().parent().find(".plan_delivery_wrapper .plan_delivery_details").slideUp(350),$this.next().toggleClass("show"),$this.next().slideToggle(350))})})}(jQuery),jQuery(document).ready(function($){$(".ptdt-display-admin-colorpick").each(function(){var value=$(this).val();$(this).parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:value})}),$(".ptdt-display-admin-colorpick").iris({change:function(event,ui){$(this).parent().find(".ptdt-display-admin-colorpickpreview").css({backgroundColor:ui.color.toString()})},hide:!0,border:!0}).click(function(){$(".iris-picker").hide(),$(this).closest("td").find(".iris-picker").show()}),$("body").click(function(){$(".iris-picker").hide()}),$(".ptdt-display-admin-colorpick").click(function(event){event.stopPropagation()})});